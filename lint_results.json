[{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/PinLock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":36,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":36,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n    \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n    {\n        variants: {\n            variant: {\n                default:\n                    \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n                secondary:\n                    \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n                destructive:\n                    \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n                outline: \"text-foreground\",\n            },\n        },\n        defaultVariants: {\n            variant: \"default\",\n        },\n    }\n)\n\nexport interface BadgeProps\n    extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> { }\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n    return (\n        <div className={cn(badgeVariants({ variant }), className)} {...props} />\n    )\n}\n\nexport { Badge, badgeVariants }\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":55,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":55,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n    {\n        variants: {\n            variant: {\n                default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n                destructive:\n                    \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n                outline:\n                    \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n                secondary:\n                    \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\n                link: \"text-primary underline-offset-4 hover:underline\",\n            },\n            size: {\n                default: \"h-10 px-4 py-2\",\n                sm: \"h-9 rounded-md px-3\",\n                lg: \"h-11 rounded-md px-8\",\n                icon: \"h-10 w-10\",\n            },\n        },\n        defaultVariants: {\n            variant: \"default\",\n            size: \"default\",\n        },\n    }\n)\n\nexport interface ButtonProps\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n    asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n    ({ className, variant, size, asChild = false, ...props }, ref) => {\n        const Comp = asChild ? Slot : \"button\"\n        return (\n            <Comp\n                className={cn(buttonVariants({ variant, size, className }))}\n                ref={ref}\n                {...props}\n            />\n        )\n    }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/input.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":4,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":4,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[72,152],"text":"type InputProps = React.InputHTMLAttributes<HTMLInputElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n    extends React.InputHTMLAttributes<HTMLInputElement> { }\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n    ({ className, type, ...props }, ref) => {\n        return (\n            <input\n                type={type}\n                className={cn(\n                    \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n                    className\n                )}\n                ref={ref}\n                {...props}\n            />\n        )\n    }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Auth/LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Calendar/CalendarView.tsx","messages":[{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `i18n.language`, but the source dependencies were [viewMode, currentDate, dailyData, incomes, spendings, monthStart, monthEnd, previousBalance]. Inferred different dependency than source.\n\n/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Calendar/CalendarView.tsx:91:31\n   89 |\n   90 |     // Chart Data Construction\n>  91 |     const chartData = useMemo(() => {\n      |                               ^^^^^^^\n>  92 |         if (viewMode === 'graph-month') {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  93 |             // Daily data for current month (Cumulative Net with Carryover)\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 152 |         return []\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 153 |     }, [viewMode, currentDate, dailyData, incomes, spendings, monthStart, monthEnd, previousBalance])\n      | ^^^^^^ Could not preserve existing manual memoization\n  154 |\n  155 |\n  156 |     // Handlers","line":91,"column":31,"nodeType":null,"endLine":153,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `t`, but the source dependencies were [viewMode, currentDate, dailyData, incomes, spendings, monthStart, monthEnd, previousBalance]. Inferred different dependency than source.\n\n/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Calendar/CalendarView.tsx:91:31\n   89 |\n   90 |     // Chart Data Construction\n>  91 |     const chartData = useMemo(() => {\n      |                               ^^^^^^^\n>  92 |         if (viewMode === 'graph-month') {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  93 |             // Daily data for current month (Cumulative Net with Carryover)\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 152 |         return []\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 153 |     }, [viewMode, currentDate, dailyData, incomes, spendings, monthStart, monthEnd, previousBalance])\n      | ^^^^^^ Could not preserve existing manual memoization\n  154 |\n  155 |\n  156 |     // Handlers","line":91,"column":31,"nodeType":null,"endLine":153,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'i18n.language' and 't'. Either include them or remove the dependency array.","line":153,"column":8,"nodeType":"ArrayExpression","endLine":153,"endColumn":101,"suggestions":[{"desc":"Update the dependencies array to be: [viewMode, monthStart, monthEnd, previousBalance, dailyData, currentDate, incomes, spendings, i18n.language, t]","fix":{"range":[5697,5790],"text":"[viewMode, monthStart, monthEnd, previousBalance, dailyData, currentDate, incomes, spendings, i18n.language, t]"}}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'calendarEnd' and 'calendarStart'. Either include them or remove the dependency array.","line":38,"column":8,"nodeType":"ArrayExpression","endLine":38,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [calendarEnd, calendarStart]","fix":{"range":[1330,1343],"text":"[calendarEnd, calendarStart]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from \"react\"\nimport { useFinanceStore } from \"@/stores/useFinanceStore\"\nimport {\n    format,\n    startOfMonth,\n    endOfMonth,\n    eachDayOfInterval,\n    isSameMonth,\n    isSameDay,\n    addMonths,\n    subMonths,\n    startOfWeek,\n    endOfWeek,\n    isToday\n} from \"date-fns\"\nimport { ChevronLeft, ChevronRight, BarChart3, Calendar as CalendarIcon, LineChart } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { DayDetailModal } from \"./DayDetailModal\"\nimport { FinanceChart } from \"./FinanceChart\"\nimport { cn } from \"@/lib/utils\"\nimport { useTranslation } from \"react-i18next\"\n\nexport function CalendarView() {\n    const { t, i18n } = useTranslation()\n    const { incomes, spendings } = useFinanceStore()\n    const [currentDate, setCurrentDate] = useState(new Date())\n    const [selectedDate, setSelectedDate] = useState<Date | null>(null)\n    const [viewMode, setViewMode] = useState<'grid' | 'graph-month' | 'graph-year'>('grid')\n\n    // Compute Calendar Grid\n    const monthStart = startOfMonth(currentDate)\n    const monthEnd = endOfMonth(monthStart)\n    const calendarStart = startOfWeek(monthStart)\n    const calendarEnd = endOfWeek(monthEnd)\n\n    const calendarDays = useMemo(() => {\n        return eachDayOfInterval({ start: calendarStart, end: calendarEnd })\n    }, [currentDate]) // eslint-disable-line react-hooks/exhaustive-deps\n\n    // Group Data by Date (Memoized)\n    const dailyData = useMemo(() => {\n        const map = new Map<string, { income: number; expense: number }>()\n\n        incomes.forEach(inc => {\n            const dateKey = format(new Date(inc.date), 'yyyy-MM-dd')\n            const current = map.get(dateKey) || { income: 0, expense: 0 }\n            map.set(dateKey, { ...current, income: current.income + inc.amount })\n        })\n\n        spendings.forEach(sp => {\n            const dateKey = format(new Date(sp.date), 'yyyy-MM-dd')\n            const current = map.get(dateKey) || { income: 0, expense: 0 }\n            map.set(dateKey, { ...current, expense: current.expense + sp.amount })\n        })\n\n        return map\n    }, [incomes, spendings])\n\n    // Monthly Summary\n    const monthlySummary = useMemo(() => {\n        let income = 0\n        let expense = 0\n\n        incomes.forEach(i => {\n            if (isSameMonth(new Date(i.date), currentDate)) income += i.amount\n        })\n        spendings.forEach(s => {\n            if (isSameMonth(new Date(s.date), currentDate)) expense += s.amount\n        })\n\n        return { income, expense, net: income - expense }\n    }, [incomes, spendings, currentDate])\n\n    // Calculate Previous Balance (Global carryover for Month View)\n    const previousBalance = useMemo(() => {\n        let income = 0;\n        let expense = 0;\n\n        incomes.forEach(i => {\n            if (new Date(i.date) < monthStart) income += i.amount;\n        });\n\n        spendings.forEach(s => {\n            if (new Date(s.date) < monthStart) expense += s.amount;\n        });\n\n        return income - expense;\n    }, [incomes, spendings, monthStart]);\n\n    // Chart Data Construction\n    const chartData = useMemo(() => {\n        if (viewMode === 'graph-month') {\n            // Daily data for current month (Cumulative Net with Carryover)\n            const daysInMonth = eachDayOfInterval({ start: monthStart, end: monthEnd })\n\n            let runningBalance = previousBalance; // Start with historical balance\n\n            return daysInMonth.map(day => {\n                const dateKey = format(day, 'yyyy-MM-dd')\n                const data = dailyData.get(dateKey) || { income: 0, expense: 0 }\n\n                // Update running balance\n                runningBalance += (data.income - data.expense);\n\n                return {\n                    date: dateKey,\n                    label: format(day, 'd'),\n                    income: data.income,\n                    expense: data.expense,\n                    net: runningBalance // Accumulated Balance including history\n                }\n            })\n        } else if (viewMode === 'graph-year') {\n            // Monthly data for current year (Annual Net Trends)\n            const yearStart = new Date(currentDate.getFullYear(), 0, 1)\n            const yearEnd = new Date(currentDate.getFullYear(), 11, 31)\n            const months = eachDayOfInterval({ start: yearStart, end: yearEnd })\n                .filter(d => d.getDate() === 1) // Get 1st of each month\n\n            // Calculate balance prior to this year\n            let runningYearBalance = 0;\n            incomes.forEach(i => {\n                if (new Date(i.date) < yearStart) runningYearBalance += i.amount;\n            });\n            spendings.forEach(s => {\n                if (new Date(s.date) < yearStart) runningYearBalance += s.amount;\n            });\n\n            return months.map(month => {\n                let inc = 0\n                let exp = 0\n                incomes.forEach(i => {\n                    if (isSameMonth(new Date(i.date), month)) inc += i.amount\n                })\n                spendings.forEach(s => {\n                    if (isSameMonth(new Date(s.date), month)) exp += s.amount\n                })\n\n                runningYearBalance += (inc - exp);\n\n                return {\n                    date: format(month, 'yyyy-MM-dd'),\n                    label: i18n.language.startsWith('th')\n                        ? t(`months.${month.getMonth()}`).substring(0, 3)\n                        : format(month, 'MMM'),\n                    income: inc,\n                    expense: exp,\n                    net: runningYearBalance // Cumulative Year Savings and prior history\n                }\n            })\n        }\n        return []\n    }, [viewMode, currentDate, dailyData, incomes, spendings, monthStart, monthEnd, previousBalance])\n\n\n    // Handlers\n    const prevMonth = () => setCurrentDate(subMonths(currentDate, 1))\n    const nextMonth = () => setCurrentDate(addMonths(currentDate, 1))\n    const goToday = () => setCurrentDate(new Date())\n\n    const handleDayClick = (day: Date) => {\n        setSelectedDate(day)\n    }\n\n\n    // Modal Data Filtering\n    const selectedDateData = useMemo(() => {\n        if (!selectedDate) return { incomes: [], spendings: [] }\n        return {\n            incomes: incomes.filter(i => isSameDay(new Date(i.date), selectedDate)),\n            spendings: spendings.filter(s => isSameDay(new Date(s.date), selectedDate))\n        }\n    }, [selectedDate, incomes, spendings])\n\n    return (\n        <div className=\"space-y-4 pb-20\">\n            {/* Header Controls */}\n            <div className=\"flex flex-col gap-3\">\n                <div className=\"flex items-center justify-between\">\n                    <h2 className=\"text-xl font-bold\">\n                        {viewMode === 'graph-year'\n                            ? i18n.language.startsWith('th')\n                                ? (currentDate.getFullYear() + 543).toString()\n                                : format(currentDate, 'yyyy')\n                            : i18n.language.startsWith('th')\n                                ? `${t(`months.${currentDate.getMonth()}`)} ${currentDate.getFullYear() + 543}`\n                                : format(currentDate, 'MMMM yyyy')}\n                    </h2>\n                    <div className=\"flex items-center gap-1\">\n                        <Button variant=\"outline\" size=\"icon\" onClick={prevMonth}>\n                            <ChevronLeft className=\"h-4 w-4\" />\n                        </Button>\n                        <Button variant=\"outline\" onClick={goToday} className=\"text-xs\">\n                            {t('common.today')}\n                        </Button>\n                        <Button variant=\"outline\" size=\"icon\" onClick={nextMonth}>\n                            <ChevronRight className=\"h-4 w-4\" />\n                        </Button>\n                    </div>\n                </div>\n\n                <div className=\"flex justify-between items-center\">\n                    {/* View Switcher */}\n                    <div className=\"flex bg-muted rounded-lg p-1 text-xs\">\n                        <button\n                            onClick={() => setViewMode('grid')}\n                            className={cn(\"px-3 py-1.5 rounded-md transition-all flex items-center gap-1\", viewMode === 'grid' ? 'bg-background shadow-sm text-foreground' : 'text-muted-foreground hover:text-foreground')}\n                        >\n                            <CalendarIcon className=\"h-3 w-3\" /> {t('calendar.grid')}\n                        </button>\n                        <button\n                            onClick={() => setViewMode('graph-month')}\n                            className={cn(\"px-3 py-1.5 rounded-md transition-all flex items-center gap-1\", viewMode === 'graph-month' ? 'bg-background shadow-sm text-foreground' : 'text-muted-foreground hover:text-foreground')}\n                        >\n                            <BarChart3 className=\"h-3 w-3\" /> {t('calendar.month')}\n                        </button>\n                        <button\n                            onClick={() => setViewMode('graph-year')}\n                            className={cn(\"px-3 py-1.5 rounded-md transition-all flex items-center gap-1\", viewMode === 'graph-year' ? 'bg-background shadow-sm text-foreground' : 'text-muted-foreground hover:text-foreground')}\n                        >\n                            <LineChart className=\"h-3 w-3\" /> {t('calendar.year')}\n                        </button>\n                    </div>\n\n                </div>\n            </div>\n\n            {/* Monthly Summary Bar (Show only in Grid or Month Graph) */}\n            {viewMode !== 'graph-year' && (\n                <div className=\"grid grid-cols-3 gap-2 text-center text-xs\">\n                    <div className=\"bg-card border p-2 rounded-lg shadow-sm\">\n                        <div className=\"text-muted-foreground mb-1\">{t('dashboard.income')}</div>\n                        <div className=\"font-bold text-emerald-600\">+{monthlySummary.income.toLocaleString()}</div>\n                    </div>\n                    <div className=\"bg-card border p-2 rounded-lg shadow-sm\">\n                        <div className=\"text-muted-foreground mb-1\">{t('dashboard.spending')}</div>\n                        <div className=\"font-bold text-rose-600\">-{monthlySummary.expense.toLocaleString()}</div>\n                    </div>\n                    <div className=\"bg-card border p-2 rounded-lg shadow-sm\">\n                        <div className=\"text-muted-foreground mb-1\">{t('common.net')}</div>\n                        <div className={cn(\"font-bold\", monthlySummary.net >= 0 ? \"text-blue-600\" : \"text-orange-600\")}>\n                            {monthlySummary.net.toLocaleString()}\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Content Area */}\n            {viewMode === 'grid' ? (\n                <>\n                    {/* Calendar Grid Header */}\n                    <div className=\"grid grid-cols-7 gap-1 text-center text-xs mb-1\">\n                        {[\n                            t('calendar.sun'),\n                            t('calendar.mon'),\n                            t('calendar.tue'),\n                            t('calendar.wed'),\n                            t('calendar.thu'),\n                            t('calendar.fri'),\n                            t('calendar.sat')\n                        ].map(d => (\n                            <div key={d} className=\"text-muted-foreground font-medium py-1\">{d}</div>\n                        ))}\n                    </div>\n                    {/* Calendar Grid Body */}\n                    <div className=\"grid grid-cols-7 gap-1\">\n                        {calendarDays.map((day, idx) => {\n                            const dateKey = format(day, 'yyyy-MM-dd')\n                            const data = dailyData.get(dateKey)\n                            const isCurrentMonth = isSameMonth(day, currentDate)\n                            const isTodayDay = isToday(day)\n\n                            return (\n                                <div\n                                    key={idx}\n                                    onClick={() => handleDayClick(day)}\n                                    className={cn(\n                                        \"min-h-[60px] p-1 border rounded-md cursor-pointer transition-colors relative flex flex-col justify-between\",\n                                        isCurrentMonth ? \"bg-card\" : \"bg-muted/30 text-muted-foreground\",\n                                        isTodayDay && \"ring-2 ring-primary ring-offset-1\",\n                                        \"hover:border-primary/50\"\n                                    )}\n                                >\n                                    <div className=\"text-right text-[10px] font-medium\">\n                                        {format(day, 'd')}\n                                    </div>\n\n                                    {/* Dots / Indicators */}\n                                    {(data?.income || data?.expense) ? (\n                                        <div className=\"space-y-0.5\">\n                                            {data.income > 0 && (\n                                                <div className=\"text-[9px] bg-emerald-100 text-emerald-700 px-0.5 rounded-sm truncate\">\n                                                    +{data.income >= 1000 ? (data.income / 1000).toFixed(1) + 'k' : data.income}\n                                                </div>\n                                            )}\n                                            {data.expense > 0 && (\n                                                <div className=\"text-[9px] bg-rose-100 text-rose-700 px-0.5 rounded-sm truncate\">\n                                                    -{data.expense >= 1000 ? (data.expense / 1000).toFixed(1) + 'k' : data.expense}\n                                                </div>\n                                            )}\n                                        </div>\n                                    ) : null}\n                                </div>\n                            )\n                        })}\n                    </div>\n                </>\n            ) : (\n                <div className=\"bg-card border rounded-lg p-2 min-h-[300px]\">\n                    <FinanceChart\n                        data={chartData}\n                    />\n                </div>\n            )}\n\n            <DayDetailModal\n                date={selectedDate}\n                isOpen={!!selectedDate}\n                onClose={() => setSelectedDate(null)}\n                incomes={selectedDateData.incomes}\n                spendings={selectedDateData.spendings}\n            />\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Calendar/DayDetailModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Calendar/FinanceChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[440,443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[440,443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2594,2597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2594,2597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n    LineChart,\n    Line,\n    XAxis,\n    YAxis,\n    CartesianGrid,\n    Tooltip,\n    Legend,\n    ResponsiveContainer\n} from 'recharts';\nimport { useTranslation } from 'react-i18next';\n\ninterface DataPoint {\n    date: string;\n    income: number;\n    expense: number;\n    net: number;\n    label: string;\n}\n\ninterface FinanceChartProps {\n    data: DataPoint[];\n}\n\n// Custom Tooltip\nconst CustomTooltip = ({ active, payload, label, t }: any) => {\n    if (active && payload && payload.length) {\n        return (\n            <div className=\"bg-background border rounded-lg shadow-lg p-3 text-xs\">\n                <p className=\"font-bold mb-1\">{label}</p>\n                <p className=\"text-emerald-600\">\n                    {t('dashboard.income')}: +{payload[0].value.toLocaleString()}\n                </p>\n                <p className=\"text-rose-600\">\n                    {t('dashboard.spending')}: -{payload[1].value.toLocaleString()}\n                </p>\n                <div className=\"mt-1 pt-1 border-t flex justify-between gap-4 font-bold\">\n                    <span>{t('common.net')}:</span>\n                    <span className={payload[2].value >= 0 ? \"text-blue-600\" : \"text-orange-600\"}>\n                        {payload[2].value.toLocaleString()}\n                    </span>\n                </div>\n            </div>\n        );\n    }\n    return null;\n};\n\nexport function FinanceChart({ data }: FinanceChartProps) {\n    const { t } = useTranslation();\n\n\n    return (\n        <div className=\"w-full h-[300px] mt-4\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <LineChart\n                    data={data}\n                    margin={{\n                        top: 5,\n                        right: 10,\n                        left: -20,\n                        bottom: 5,\n                    }}\n                >\n                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"hsl(var(--border))\" />\n                    <XAxis\n                        dataKey=\"label\"\n                        tick={{ fontSize: 10, fill: 'hsl(var(--muted-foreground))' }}\n                        tickLine={false}\n                        axisLine={false}\n                    />\n                    <YAxis\n                        tick={{ fontSize: 10, fill: 'hsl(var(--muted-foreground))' }}\n                        tickLine={false}\n                        axisLine={false}\n                        tickFormatter={(value) => `${value >= 1000 ? (value / 1000).toFixed(0) + 'k' : value}`}\n                    />\n                    <Tooltip content={(props: any) => <CustomTooltip {...props} t={t} />} cursor={{ stroke: 'hsl(var(--muted-foreground))', strokeWidth: 1, strokeDasharray: '3 3' }} />\n                    <Legend iconType=\"circle\" wrapperStyle={{ fontSize: '12px', paddingTop: '10px' }} />\n                    <Line\n                        type=\"monotone\"\n                        dataKey=\"income\"\n                        name={t('dashboard.income')}\n                        stroke=\"#10b981\" // emerald-500\n                        strokeWidth={2}\n                        dot={{ r: 3, fill: '#10b981', strokeWidth: 0 }}\n                        activeDot={{ r: 5 }}\n                    />\n                    <Line\n                        type=\"monotone\"\n                        dataKey=\"expense\"\n                        name={t('dashboard.spending')}\n                        stroke=\"#f43f5e\" // rose-500\n                        strokeWidth={2}\n                        dot={{ r: 3, fill: '#f43f5e', strokeWidth: 0 }}\n                        activeDot={{ r: 5 }}\n                    />\n                    <Line\n                        type=\"monotone\"\n                        dataKey=\"net\"\n                        name={t('common.net')}\n                        stroke=\"#2563eb\" // blue-600\n                        strokeWidth={2}\n                        strokeDasharray=\"5 5\"\n                        dot={{ r: 3, fill: '#2563eb', strokeWidth: 0 }}\n                        activeDot={{ r: 5 }}\n                    />\n                </LineChart>\n            </ResponsiveContainer>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Dashboard/DashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Income/AddIncomeModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Income/AddIncomeModal.tsx:49:13\n  47 |     useEffect(() => {\n  48 |         if (open && initialData) {\n> 49 |             setName(initialData.name)\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  50 |             setAmount(initialData.amount.toString())\n  51 |             setFrequency(initialData.frequency)\n  52 |             setCategory(initialData.category)","line":49,"column":13,"nodeType":null,"endLine":49,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\"\nimport { useFinanceStore } from \"@/stores/useFinanceStore\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport type { Frequency, Income } from \"@/types\"\nimport { format } from \"date-fns\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n    initialData?: Income\n    trigger?: React.ReactNode\n    defaultDate?: Date\n}\n\nexport function IncomeModal({ initialData, trigger, defaultDate }: Props) {\n    const { t } = useTranslation()\n    const [open, setOpen] = useState(false)\n    const { addIncome, updateIncome } = useFinanceStore()\n    const isEdit = !!initialData\n\n    const [name, setName] = useState('')\n    const [amount, setAmount] = useState('')\n    const [frequency, setFrequency] = useState<Frequency>('monthly')\n    const [category, setCategory] = useState('Salary')\n    // Default to today YYYY-MM-DD\n    const [date, setDate] = useState(new Date().toISOString().split('T')[0])\n\n    const resetForm = () => {\n        setName('')\n        setAmount('')\n        setFrequency('monthly')\n        setCategory('Salary')\n        setDate(new Date().toISOString().split('T')[0])\n    }\n\n    useEffect(() => {\n        if (open && initialData) {\n            setName(initialData.name)\n            setAmount(initialData.amount.toString())\n            setFrequency(initialData.frequency)\n            setCategory(initialData.category)\n            // Fix: ensure we don't shift timezone if possible, but for editing, we assume stored date is correct.\n            // Using split('T')[0] on ISO string is risky if stored as UTC midnight.\n            // But let's keep consistent with original logic for edit for now, as user didn't complain about Edit.\n            setDate(new Date(initialData.date).toISOString().split('T')[0])\n        } else if (open && !initialData) {\n            resetForm()\n            // Fix: Use local format for defaultDate\n            if (defaultDate) {\n                setDate(format(defaultDate, 'yyyy-MM-dd'))\n            }\n        }\n    }, [open, initialData, defaultDate])\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault()\n        if (!name || !amount || !date) return\n\n        const payload = {\n            name,\n            amount: parseFloat(amount),\n            frequency,\n            category,\n            // Convert back to full ISO string for storage, preserving the selected date\n            date: new Date(date).toISOString(),\n        }\n\n        if (isEdit && initialData) {\n            updateIncome(initialData.id, payload)\n        } else {\n            addIncome(payload)\n        }\n\n        setOpen(false)\n        if (!isEdit) resetForm()\n    }\n\n\n    return (\n        <Dialog open={open} onOpenChange={setOpen}>\n            <DialogTrigger asChild>\n                {trigger || (\n                    <Button size=\"sm\" variant=\"default\" className=\"bg-emerald-600 hover:bg-emerald-700 text-white\">\n                        + {t('income.add_btn')}\n                    </Button>\n                )}\n            </DialogTrigger>\n            <DialogContent className=\"sm:max-w-[425px]\">\n                <DialogHeader>\n                    <DialogTitle>{isEdit ? t('income.edit') : t('income.add')}</DialogTitle>\n                    <DialogDescription>\n                        {isEdit ? t('income.desc_edit') : t('income.desc_add')}\n                    </DialogDescription>\n                </DialogHeader>\n                <form onSubmit={handleSubmit}>\n                    <div className=\"grid gap-4 py-4\">\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"date\">{t('income.date')}</Label>\n                            <Input\n                                id=\"date\"\n                                type=\"date\"\n                                value={date}\n                                onChange={(e) => setDate(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"name\">{t('income.name')}</Label>\n                            <Input\n                                id=\"name\"\n                                placeholder={t('income.placeholder_name')}\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"amount\">{t('income.amount')}</Label>\n                            <Input\n                                id=\"amount\"\n                                type=\"number\"\n                                placeholder=\"0.00\"\n                                value={amount}\n                                onChange={(e) => setAmount(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"frequency\">{t('income.frequency')}</Label>\n                            <Select value={frequency} onValueChange={(val) => setFrequency(val as Frequency)}>\n                                <SelectTrigger>\n                                    <SelectValue placeholder={t('common.loading')} />\n                                </SelectTrigger>\n                                <SelectContent>\n                                    <SelectItem value=\"monthly\">{t('frequencies.monthly')}</SelectItem>\n                                    <SelectItem value=\"yearly\">{t('frequencies.yearly')}</SelectItem>\n                                    <SelectItem value=\"one-time\">{t('frequencies.one-time')}</SelectItem>\n                                    <SelectItem value=\"irregular\">{t('frequencies.irregular')}</SelectItem>\n                                </SelectContent>\n                            </Select>\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"category\">{t('income.category')}</Label>\n                            <Select value={category} onValueChange={setCategory}>\n                                <SelectTrigger>\n                                    <SelectValue placeholder={t('common.loading')} />\n                                </SelectTrigger>\n                                <SelectContent>\n                                    <SelectItem value=\"Salary\">{t('categories.Salary')}</SelectItem>\n                                    <SelectItem value=\"Freelance\">{t('categories.Freelance')}</SelectItem>\n                                    <SelectItem value=\"Business\">{t('categories.Business')}</SelectItem>\n                                    <SelectItem value=\"Investment\">{t('categories.Investment')}</SelectItem>\n                                    <SelectItem value=\"Gift\">{t('categories.Gift')}</SelectItem>\n                                    <SelectItem value=\"Other\">{t('categories.Other')}</SelectItem>\n                                </SelectContent>\n                            </Select>\n                        </div>\n                    </div>\n                    <DialogFooter>\n                        <Button type=\"submit\">{t('common.save')}</Button>\n                    </DialogFooter>\n                </form>\n            </DialogContent>\n        </Dialog>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Income/IncomeList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Obligation/AddObligationModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Obligation/AddObligationModal.tsx:60:13\n  58 |     useEffect(() => {\n  59 |         if (open && initialData) {\n> 60 |             setStep(2)\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  61 |             setType(initialData.type)\n  62 |             setName(initialData.name)\n  63 |             setAmount(initialData.amount.toString())","line":60,"column":13,"nodeType":null,"endLine":60,"endColumn":20},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Obligation/AddObligationModal.tsx:86:17\n  84 |                 const remainingMonths = Math.max(0, mParams.total - mParams.paid)\n  85 |                 const calculatedRemaining = remainingMonths * mParams.monthly\n> 86 |                 setBalance(calculatedRemaining.toString())\n     |                 ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  87 |             }\n  88 |         }\n  89 |     }, [amount, totalMonths, paidMonths, type])","line":86,"column":17,"nodeType":null,"endLine":86,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useFinanceStore } from \"@/stores/useFinanceStore\"\nimport type { Obligation, ObligationType } from '@/types'\nimport { CreditCard, Smartphone, Car, Home, Banknote, HelpCircle } from \"lucide-react\"\nimport { useTranslation } from \"react-i18next\"\nimport { cn } from \"@/lib/utils\"\n\ninterface Props {\n    initialData?: Obligation\n    trigger?: React.ReactNode\n}\n\nexport function ObligationModal({ initialData, trigger }: Props) {\n    const { t } = useTranslation()\n    const [open, setOpen] = useState(false)\n    const { addObligation, updateObligation } = useFinanceStore()\n    const isEdit = !!initialData\n\n    const [step, setStep] = useState<1 | 2>(1)\n    const [type, setType] = useState<ObligationType>('installment')\n\n    // Form Fields\n    const [name, setName] = useState('')\n    const [amount, setAmount] = useState('') // Monthly / Min Payment\n    const [balance, setBalance] = useState('') // Total / Remaining\n    const [interestRate, setInterestRate] = useState('')\n    const [totalMonths, setTotalMonths] = useState('')\n    const [paidMonths, setPaidMonths] = useState('0')\n    const [creditLimit, setCreditLimit] = useState('')\n    const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0])\n\n    // Initialize form on open\n    const resetForm = () => {\n        setStep(1)\n        setType('installment')\n        setName('')\n        setAmount('')\n        setBalance('')\n        setInterestRate('')\n        setTotalMonths('')\n        setPaidMonths('0')\n        setCreditLimit('')\n        setStartDate(new Date().toISOString().split('T')[0]) // Reset startDate\n    }\n\n    useEffect(() => {\n        if (open && initialData) {\n            setStep(2)\n            setType(initialData.type)\n            setName(initialData.name)\n            setAmount(initialData.amount.toString())\n            setBalance(initialData.balance?.toString() || '')\n            setInterestRate(initialData.interestRate?.toString() || '')\n            setTotalMonths(initialData.totalMonths?.toString() || '')\n            setPaidMonths(initialData.paidMonths?.toString() || '0')\n            setCreditLimit(initialData.creditLimit?.toString() || '')\n            setStartDate(initialData.startDate ? new Date(initialData.startDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0])\n        } else if (open && !initialData) {\n            resetForm()\n        }\n    }, [open, initialData])\n\n    // Auto-calculate Balance (Remaining Total) for Installments\n    useEffect(() => {\n        if (type === 'installment' && amount && totalMonths) {\n            const mParams = {\n                monthly: parseFloat(amount) || 0,\n                total: parseInt(totalMonths) || 0,\n                paid: parseInt(paidMonths) || 0\n            }\n            if (mParams.monthly > 0 && mParams.total > 0) {\n                const remainingMonths = Math.max(0, mParams.total - mParams.paid)\n                const calculatedRemaining = remainingMonths * mParams.monthly\n                setBalance(calculatedRemaining.toString())\n            }\n        }\n    }, [amount, totalMonths, paidMonths, type])\n\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault()\n        if (!name || !amount) return\n\n        const payload = {\n            name,\n            type,\n            amount: parseFloat(amount),\n            balance: balance ? parseFloat(balance) : undefined,\n            interestRate: interestRate ? parseFloat(interestRate) : undefined,\n            totalMonths: totalMonths ? parseInt(totalMonths) : undefined,\n            paidMonths: paidMonths ? parseInt(paidMonths) : undefined,\n            creditLimit: creditLimit ? parseFloat(creditLimit) : undefined,\n            status: (initialData?.status || 'active') as 'active' | 'closed',\n            startDate: startDate || new Date().toISOString(), // Use startDate from state\n        }\n\n        if (isEdit && initialData) {\n            updateObligation(initialData.id, payload)\n        } else {\n            addObligation(payload)\n        }\n\n        setOpen(false)\n        if (!isEdit) resetForm()\n    }\n\n    return (\n        <Dialog open={open} onOpenChange={setOpen}>\n            <DialogTrigger asChild>\n                {trigger || (\n                    <Button size=\"sm\" variant=\"outline\">\n                        + {t('obligations.add_btn')}\n                    </Button>\n                )}\n            </DialogTrigger>\n            <DialogContent className=\"sm:max-w-[425px]\">\n                <DialogHeader>\n                    <DialogTitle>{isEdit ? t('obligations.edit') : t('obligations.add')}</DialogTitle>\n                    <DialogDescription>\n                        {isEdit ? t('obligations.desc_edit') : t('obligations.desc_add')}\n                    </DialogDescription>\n                </DialogHeader>\n\n                <div className=\"py-4\">\n                    {/* Stepper Header */}\n                    <div className=\"flex items-center mb-6 px-2\">\n                        {[1, 2].map((s) => (\n                            <React.Fragment key={s}>\n                                <div className={cn(\n                                    \"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-colors\",\n                                    step === s ? \"bg-primary border-primary text-primary-foreground\" :\n                                        step > s ? \"bg-emerald-500 border-emerald-500 text-white\" : \"border-muted-foreground/30 text-muted-foreground\"\n                                )}>\n                                    {step > s ? \"✓\" : s}\n                                </div>\n                                {s === 1 && <div className={cn(\"flex-1 h-0.5 mx-2\", step > 1 ? \"bg-emerald-500\" : \"bg-muted/30\")} />}\n                            </React.Fragment>\n                        ))}\n                    </div>\n\n                    <form onSubmit={handleSubmit}>\n                        {step === 1 ? (\n                            <div className=\"space-y-4 animate-in fade-in slide-in-from-right-4\">\n                                <p className=\"text-sm text-muted-foreground\">{t('obligations.step_1_desc')}</p>\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    {[\n                                        { id: 'installment', icon: Smartphone, label: t('obligation_types.installment') },\n                                        { id: 'credit-card', icon: CreditCard, label: t('obligation_types.credit-card') },\n                                        { id: 'personal-loan', icon: Banknote, label: t('obligation_types.personal-loan') },\n                                        { id: 'car-loan', icon: Car, label: t('obligation_types.car-loan') },\n                                        { id: 'home-loan', icon: Home, label: t('obligation_types.home-loan') },\n                                        { id: 'other', icon: HelpCircle, label: t('obligation_types.other') },\n                                    ].map((item) => (\n                                        <button\n                                            key={item.id}\n                                            type=\"button\"\n                                            onClick={() => setType(item.id as ObligationType)}\n                                            className={cn(\n                                                \"p-4 rounded-xl border-2 text-left transition-all hover:bg-muted/50 flex flex-col gap-2\",\n                                                type === item.id ? \"border-primary bg-primary/5 shadow-sm\" : \"border-transparent bg-muted/30\"\n                                            )}\n                                        >\n                                            <item.icon className={cn(\"h-5 w-5\", type === item.id ? \"text-primary\" : \"text-muted-foreground\")} />\n                                            <span className=\"text-xs font-bold\">{item.label}</span>\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                        ) : (\n                            <div className=\"space-y-4 animate-in fade-in slide-in-from-right-4\">\n                                <div className=\"space-y-2\">\n                                    <Label htmlFor=\"name\">{t('obligations.name')}</Label>\n                                    <Input\n                                        id=\"name\"\n                                        placeholder={t('obligations.placeholder_name')}\n                                        value={name}\n                                        onChange={(e) => setName(e.target.value)}\n                                        required\n                                    />\n                                </div>\n\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"amount\">\n                                            {type === 'credit-card' ? t('obligations.amount_min') : t('obligations.amount')}\n                                        </Label>\n                                        <Input\n                                            id=\"amount\"\n                                            type=\"number\"\n                                            placeholder=\"0.00\"\n                                            value={amount}\n                                            onChange={(e) => setAmount(e.target.value)}\n                                            required\n                                        />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"balance\">{t('obligations.balance')}</Label>\n                                        <Input\n                                            id=\"balance\"\n                                            type=\"number\"\n                                            placeholder=\"0.00\"\n                                            value={balance}\n                                            onChange={(e) => setBalance(e.target.value)}\n                                        />\n                                    </div>\n                                </div>\n\n                                {type === 'installment' && (\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"totalMonths\">{t('obligations.total_months')}</Label>\n                                            <Input\n                                                id=\"totalMonths\"\n                                                type=\"number\"\n                                                placeholder=\"12\"\n                                                value={totalMonths}\n                                                onChange={(e) => setTotalMonths(e.target.value)}\n                                            />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"paidMonths\">{t('obligations.paid_months')}</Label>\n                                            <Input\n                                                id=\"paidMonths\"\n                                                type=\"number\"\n                                                placeholder=\"0\"\n                                                value={paidMonths}\n                                                onChange={(e) => setPaidMonths(e.target.value)}\n                                            />\n                                        </div>\n                                    </div>\n                                )}\n\n                                {type === 'credit-card' && (\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"creditLimit\">{t('obligations.limit')}</Label>\n                                        <Input\n                                            id=\"creditLimit\"\n                                            type=\"number\"\n                                            placeholder=\"50000\"\n                                            value={creditLimit}\n                                            onChange={(e) => setCreditLimit(e.target.value)}\n                                        />\n                                    </div>\n                                )}\n\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"interestRate\">{t('obligations.interest')}</Label>\n                                        <Input\n                                            id=\"interestRate\"\n                                            type=\"number\"\n                                            placeholder=\"0.00\"\n                                            step=\"0.01\"\n                                            value={interestRate}\n                                            onChange={(e) => setInterestRate(e.target.value)}\n                                        />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"startDate\">{t('obligations.start_date')}</Label>\n                                        <Input\n                                            id=\"startDate\"\n                                            type=\"date\"\n                                            value={startDate}\n                                            onChange={(e) => setStartDate(e.target.value)}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        <DialogFooter className=\"mt-6 flex-row gap-2 sm:justify-between\">\n                            {step === 1 ? (\n                                <>\n                                    <div />\n                                    <Button type=\"button\" onClick={() => setStep(2)}>\n                                        {t('common.next')}\n                                    </Button>\n                                </>\n                            ) : (\n                                <>\n                                    <Button type=\"button\" variant=\"ghost\" onClick={() => setStep(1)}>\n                                        {t('common.back')}\n                                    </Button>\n                                    <Button type=\"submit\">\n                                        {t('common.save')}\n                                    </Button>\n                                </>\n                            )}\n                        </DialogFooter>\n                    </form>\n                </div>\n            </DialogContent>\n        </Dialog>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Obligation/ObligationList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Settings/SettingsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_err' is defined but never used.","line":43,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useFinanceStore } from '@/stores/useFinanceStore';\nimport { Shield, Trash2, ArrowLeft, Key, AlertTriangle, Moon, LogOut, Languages } from 'lucide-react';\nimport { useTranslation } from 'react-i18next';\nimport { ThemeToggle } from '@/components/ThemeToggle';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { useNavigate } from 'react-router-dom';\n\nexport const SettingsPage: React.FC = () => {\n    const { t, i18n } = useTranslation();\n    const { pin, setPin, resetData, logout, setLanguage } = useFinanceStore();\n    const [newPin, setNewPin] = useState('');\n    const [confirmPin, setConfirmPin] = useState('');\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [isUpdating, setIsUpdating] = useState(false);\n    const navigate = useNavigate();\n\n    const handleSetPin = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError('');\n        setSuccess('');\n\n        if (newPin.length !== 6 || !/^\\d+$/.test(newPin)) {\n            setError(t('settings.pin_length_error'));\n            return;\n        }\n\n        if (newPin !== confirmPin) {\n            setError(t('settings.pin_match_error'));\n            return;\n        }\n\n        setIsUpdating(true);\n        try {\n            await setPin(newPin);\n            setSuccess(t('settings.pin_update_success'));\n            setNewPin('');\n            setConfirmPin('');\n        } catch (_err) {\n            setError(t('settings.pin_update_error'));\n        } finally {\n            setIsUpdating(false);\n        }\n    };\n\n    const handleReset = async () => {\n        await resetData();\n        navigate('/');\n    };\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-8 pb-20\"\n        >\n            <div className=\"flex items-center gap-4\">\n                <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(-1)}>\n                    <ArrowLeft className=\"h-5 w-5\" />\n                </Button>\n                <div>\n                    <h2 className=\"text-2xl font-bold tracking-tight\">{t('settings.title')}</h2>\n                    <p className=\"text-sm text-muted-foreground\">{t('settings.subtitle')}</p>\n                </div>\n            </div>\n\n            <section className=\"space-y-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <Languages className=\"h-5 w-5 text-primary\" />\n                    <h3 className=\"text-lg font-semibold\">{t('settings.language')}</h3>\n                </div>\n\n                <div className=\"bg-card rounded-2xl p-6 border shadow-sm space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"space-y-0.5\">\n                            <h4 className=\"font-medium\">{t('settings.language')}</h4>\n                            <p className=\"text-sm text-muted-foreground\">{t('settings.language_desc')}</p>\n                        </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                        <Button\n                            variant={i18n.language.startsWith('en') ? 'default' : 'outline'}\n                            onClick={() => setLanguage('en')}\n                            className=\"rounded-xl\"\n                        >\n                            English\n                        </Button>\n                        <Button\n                            variant={i18n.language.startsWith('th') ? 'default' : 'outline'}\n                            onClick={() => setLanguage('th')}\n                            className=\"rounded-xl\"\n                        >\n                            ไทย\n                        </Button>\n                    </div>\n                </div>\n            </section>\n\n            <section className=\"space-y-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <Moon className=\"h-5 w-5 text-primary\" />\n                    <h3 className=\"text-lg font-semibold\">{t('settings.appearance')}</h3>\n                </div>\n\n                <div className=\"bg-card rounded-2xl p-6 border shadow-sm flex items-center justify-between\">\n                    <div className=\"space-y-0.5\">\n                        <h4 className=\"font-medium\">{t('settings.dark_mode')}</h4>\n                        <p className=\"text-sm text-muted-foreground\">{t('settings.dark_mode_desc')}</p>\n                    </div>\n                    <ThemeToggle />\n                </div>\n            </section>\n\n            <section className=\"space-y-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <Shield className=\"h-5 w-5 text-primary\" />\n                    <h3 className=\"text-lg font-semibold\">{t('settings.security')}</h3>\n                </div>\n\n                <div className=\"bg-card rounded-2xl p-6 border shadow-sm space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"space-y-0.5\">\n                            <h4 className=\"font-medium\">{t('settings.profile_pin')}</h4>\n                            <p className=\"text-sm text-muted-foreground\">\n                                {pin ? t('settings.pin_desc_change') : t('settings.pin_desc_set')}\n                            </p>\n                        </div>\n                        <Key className=\"h-5 w-5 text-muted-foreground\" />\n                    </div>\n\n                    <form onSubmit={handleSetPin} className=\"space-y-4 pt-2\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"space-y-2\">\n                                <label className=\"text-sm font-medium\">{t('settings.new_pin')}</label>\n                                <Input\n                                    type=\"password\"\n                                    maxLength={6}\n                                    placeholder={t('settings.placeholder_new_pin')}\n                                    value={newPin}\n                                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => setNewPin(e.target.value)}\n                                    className=\"rounded-xl\"\n                                />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <label className=\"text-sm font-medium\">{t('settings.confirm_pin')}</label>\n                                <Input\n                                    type=\"password\"\n                                    maxLength={6}\n                                    placeholder={t('settings.placeholder_confirm_pin')}\n                                    value={confirmPin}\n                                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => setConfirmPin(e.target.value)}\n                                    className=\"rounded-xl\"\n                                />\n                            </div>\n                        </div>\n\n                        {error && <p className=\"text-destructive text-xs font-medium\">{error}</p>}\n                        {success && <p className=\"text-emerald-500 text-xs font-medium\">{success}</p>}\n\n                        <Button type=\"submit\" className=\"w-full rounded-xl\" disabled={isUpdating}>\n                            {isUpdating ? t('settings.updating') : (pin ? t('settings.update_pin') : t('settings.set_pin'))}\n                        </Button>\n                    </form>\n                </div>\n            </section>\n\n            <section className=\"space-y-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <LogOut className=\"h-5 w-5 text-muted-foreground\" />\n                    <h3 className=\"text-lg font-semibold\">{t('settings.account')}</h3>\n                </div>\n\n                <div className=\"bg-card rounded-2xl p-6 border shadow-sm space-y-4\">\n                    <div className=\"space-y-1\">\n                        <h4 className=\"font-medium\">{t('settings.logout')}</h4>\n                        <p className=\"text-sm text-muted-foreground\">{t('settings.logout_desc')}</p>\n                    </div>\n                    <Button\n                        variant=\"outline\"\n                        onClick={() => logout()}\n                        className=\"w-full rounded-xl flex items-center gap-2 hover:bg-destructive hover:text-destructive-foreground hover:border-destructive transition-all\"\n                    >\n                        <LogOut className=\"h-4 w-4\" />\n                        {t('settings.logout')}\n                    </Button>\n                </div>\n            </section>\n\n            <section className=\"space-y-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <Trash2 className=\"h-5 w-5 text-destructive\" />\n                    <h3 className=\"text-lg font-semibold text-destructive\">{t('settings.danger_zone')}</h3>\n                </div>\n\n                <div className=\"bg-destructive/5 rounded-2xl p-6 border border-destructive/20 shadow-sm space-y-4\">\n                    <div className=\"space-y-0.5\">\n                        <h4 className=\"font-medium text-destructive\">{t('settings.reset_data')}</h4>\n                        <p className=\"text-sm text-destructive/70\">\n                            {t('settings.reset_desc')}\n                        </p>\n                    </div>\n\n                    <Dialog>\n                        <DialogTrigger asChild>\n                            <Button variant=\"destructive\" className=\"w-full rounded-xl\">\n                                {t('settings.reset_btn')}\n                            </Button>\n                        </DialogTrigger>\n                        <DialogContent className=\"sm:max-w-[425px] rounded-3xl\">\n                            <DialogHeader>\n                                <DialogTitle className=\"flex items-center gap-2\">\n                                    <AlertTriangle className=\"h-5 w-5 text-destructive\" />\n                                    {t('settings.confirm_reset')}\n                                </DialogTitle>\n                                <DialogDescription className=\"pt-2\">\n                                    {t('settings.reset_warning')}\n                                </DialogDescription>\n                            </DialogHeader>\n                            <DialogFooter className=\"gap-2 sm:gap-0\">\n                                <Button variant=\"outline\" onClick={() => { }} className=\"rounded-xl\">{t('common.cancel')}</Button>\n                                <Button variant=\"destructive\" onClick={handleReset} className=\"rounded-xl\">{t('settings.yes_reset')}</Button>\n                            </DialogFooter>\n                        </DialogContent>\n                    </Dialog>\n                </div>\n            </section>\n        </motion.div>\n    );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Spending/AddSpendingModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Spending/AddSpendingModal.tsx:61:13\n  59 |     useEffect(() => {\n  60 |         if (open && initialData) {\n> 61 |             setName(initialData.name)\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  62 |             setAmount(initialData.amount.toString())\n  63 |             setCategory(initialData.category)\n  64 |             setKind(initialData.kind)","line":61,"column":13,"nodeType":null,"endLine":61,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4739,4742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4739,4742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { format } from 'date-fns'\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\"\nimport { useFinanceStore } from \"@/stores/useFinanceStore\"\nimport type { Spending } from '@/types'\nimport { useTranslation } from 'react-i18next'\n\ninterface Props {\n    initialData?: Spending\n    trigger?: React.ReactNode\n    defaultDate?: Date\n}\n\nexport function SpendingModal({ initialData, trigger, defaultDate }: Props) {\n    const { t } = useTranslation()\n    const [open, setOpen] = useState(false)\n    const store = useFinanceStore()\n    const { addSpending, updateSpending, obligations } = store\n    const isEdit = !!initialData\n\n    const [name, setName] = useState('')\n    const [amount, setAmount] = useState('')\n    const [category, setCategory] = useState('Food')\n    const [date, setDate] = useState(new Date().toISOString().split('T')[0])\n\n    // New Fields\n    const [kind, setKind] = useState<'normal' | 'obligation-payment'>('normal')\n    const [linkedObligationId, setLinkedObligationId] = useState<string>('')\n\n    const activeObligations = obligations.filter(o => o.status !== 'closed')\n\n    const resetForm = () => {\n        setName('')\n        setAmount('')\n        setCategory('Food')\n        setKind('normal')\n        setLinkedObligationId('')\n        setDate(new Date().toISOString().split('T')[0])\n    }\n\n    useEffect(() => {\n        if (open && initialData) {\n            setName(initialData.name)\n            setAmount(initialData.amount.toString())\n            setCategory(initialData.category)\n            setKind(initialData.kind)\n            setLinkedObligationId(initialData.linkedObligationId || '')\n            setDate(new Date(initialData.date).toISOString().split('T')[0])\n        } else if (open && !initialData) {\n            resetForm()\n            // Fix: Use local format for defaultDate\n            if (defaultDate) {\n                setDate(format(defaultDate, 'yyyy-MM-dd'))\n            }\n        }\n    }, [open, initialData, defaultDate])\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault()\n        if (!name || !amount || !date) return\n\n        // Extra validation for linked items\n        if (kind === 'obligation-payment' && !linkedObligationId) return\n\n        const payload = {\n            name,\n            amount: parseFloat(amount),\n            category,\n            date: new Date(date).toISOString(),\n            kind,\n            linkedObligationId: kind === 'obligation-payment' ? linkedObligationId : undefined,\n        }\n\n        if (isEdit && initialData) {\n            updateSpending(initialData.id, payload)\n        } else {\n            addSpending(payload)\n        }\n\n        setOpen(false)\n        if (!isEdit) resetForm()\n    }\n\n\n    // Auto-fill details when linking\n    const handleObligationSelect = (id: string) => {\n        setLinkedObligationId(id)\n        const ob = obligations.find(o => o.id === id)\n        if (ob) {\n            if (!isEdit) { // Only auto-fill name/amount if not editing existing\n                // Try to translate \"Pay\" prefix or similar if needed, but usually we just use the name\n                setName(`${t('spending.pay_obligation')}: ${ob.name}`)\n                setAmount(ob.amount.toString()) // Use the monthly/min payment amount\n                setCategory('Obligation Payment')\n            }\n        }\n    }\n\n    return (\n        <Dialog open={open} onOpenChange={setOpen}>\n            <DialogTrigger asChild>\n                {trigger || (\n                    <Button size=\"sm\" variant=\"outline\">\n                        + {t('spending.add_btn')}\n                    </Button>\n                )}\n            </DialogTrigger>\n            <DialogContent className=\"sm:max-w-[425px]\">\n                <DialogHeader>\n                    <DialogTitle>{isEdit ? t('spending.edit') : t('spending.add')}</DialogTitle>\n                    <DialogDescription>\n                        {isEdit ? t('spending.desc_edit') : t('spending.desc_add')}\n                    </DialogDescription>\n                </DialogHeader>\n                <form onSubmit={handleSubmit}>\n                    <div className=\"grid gap-4 py-4\">\n                        <div className=\"space-y-2\">\n                            <Label>{t('spending.type')}</Label>\n                            <Select value={kind} onValueChange={(val: any) => setKind(val)}>\n                                <SelectTrigger>\n                                    <SelectValue />\n                                </SelectTrigger>\n                                <SelectContent>\n                                    <SelectItem value=\"normal\">{t('spending.normal')}</SelectItem>\n                                    <SelectItem value=\"obligation-payment\">{t('spending.pay_obligation')}</SelectItem>\n                                </SelectContent>\n                            </Select>\n                        </div>\n\n                        {kind === 'obligation-payment' && (\n                            <div className=\"space-y-2\">\n                                <Label>{t('spending.select_obligation')}</Label>\n                                <Select value={linkedObligationId} onValueChange={handleObligationSelect}>\n                                    <SelectTrigger>\n                                        <SelectValue placeholder={t('spending.select_obligation')} />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        {activeObligations.map(ob => (\n                                            <SelectItem key={ob.id} value={ob.id}>\n                                                {ob.name} ({t(`obligation_types.${ob.type}`)})\n                                            </SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                        )}\n\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"date\">{t('spending.date')}</Label>\n                            <Input\n                                id=\"date\"\n                                type=\"date\"\n                                value={date}\n                                onChange={(e) => setDate(e.target.value)}\n                                required\n                            />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"name\">{t('spending.name')}</Label>\n                            <Input\n                                id=\"name\"\n                                placeholder={t('spending.placeholder_name')}\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"amount\">{t('spending.amount')}</Label>\n                            <Input\n                                id=\"amount\"\n                                type=\"number\"\n                                placeholder=\"0.00\"\n                                value={amount}\n                                onChange={(e) => setAmount(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"category\">{t('spending.category')}</Label>\n                            <Select value={category} onValueChange={setCategory}>\n                                <SelectTrigger>\n                                    <SelectValue placeholder={t('spending.category')} />\n                                </SelectTrigger>\n                                <SelectContent>\n                                    <SelectItem value=\"Food\">{t('categories.Food')}</SelectItem>\n                                    <SelectItem value=\"Transport\">{t('categories.Transport')}</SelectItem>\n                                    <SelectItem value=\"Housing\">{t('categories.Housing')}</SelectItem>\n                                    <SelectItem value=\"Entertainment\">{t('categories.Entertainment')}</SelectItem>\n                                    <SelectItem value=\"Health\">{t('categories.Health')}</SelectItem>\n                                    <SelectItem value=\"Shopping\">{t('categories.Shopping')}</SelectItem>\n                                    <SelectItem value=\"Obligation Payment\">{t('categories.Obligation Payment')}</SelectItem>\n                                    <SelectItem value=\"Other\">{t('categories.Other')}</SelectItem>\n                                </SelectContent>\n                            </Select>\n                        </div>\n                    </div>\n                    <DialogFooter>\n                        <Button type=\"submit\">{t('common.save')}</Button>\n                    </DialogFooter>\n                </form>\n            </DialogContent>\n        </Dialog>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Spending/SpendingList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/features/Transactions/TransactionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/i18n/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/lib/supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/services/authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/services/financeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/services/syncService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/stores/useFinanceStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jirawat/.gemini/antigravity/scratch/cash-flow-manager/src/utils/demoData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
